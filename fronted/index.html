<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema Escolar SOA</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link rel="stylesheet" href="css/login-style.css?v=2.0">

    <style>
        /* Estilos base del Dashboard */
        body { background-color: #f4f6f9; }
        /* Esta clase ocultará el login cuando entremos */
        .oculto { display: none !important; }
        
        /* Efecto hover en tarjetas del dashboard */
        .card-role { transition: transform 0.2s; cursor: pointer; }
        .card-role:hover { transform: translateY(-5px); }
        
        /* Estilo Nav Link */
        .nav-link-custom {
            display: block;
            padding: 10px 15px;
            color: rgba(255,255,255,0.8);
            text-decoration: none;
            border-radius: 5px;
            transition: all 0.2s;
            cursor: pointer;
        }
        .nav-link-custom:hover {
            background-color: rgba(255,255,255,0.1);
            color: white;
        }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-container">
            <div class="header-text">
                <img class="header-text-logo" src="img/logo.png" alt="logo" onerror="this.style.display='none'">
                <p class="header-text-description">Acceso Escolar</p>
            </div>
            
            <form id="form-login">
                <input type="email" id="email" placeholder="Correo Electrónico" required class="form-control mb-3">
                <input type="password" id="password" placeholder="Contraseña" required class="form-control mb-3">
                
                <button type="submit" class="btn btn-primary w-100">Ingresar</button>
            </form>
            
            <div id="login-error" class="text-danger fw-bold mt-3 text-center"></div>
            
            <div style="margin-top: 15px; font-size: 12px; color: #888; text-align: center;">
                &copy; 2025 Sistema Escolar SOA Todos los derechos reservados. 
            </div>
        </div>
    </div>

    <div id="dashboard-screen" class="oculto d-flex" style="min-height: 100vh;">
        
        <div class="sidebar-container bg-dark text-white d-flex flex-column" style="width: 280px; min-height: 100vh;">
            <div class="p-4 text-center border-bottom border-secondary">
                <i class="bi bi-mortarboard-fill text-warning mb-2" style="font-size: 2.5rem;"></i>
                <h4 class="fw-bold">Sistema Escolar</h4>
            </div>

            <div class="p-3 text-center">
                <div class="d-inline-block p-1 rounded-circle border border-2 border-white mb-2">
                    <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" width="50" class="rounded-circle">
                </div>
                <div id="user-info" class="small text-white-50">Cargando...</div>
            </div>

            <div class="flex-grow-1 overflow-auto py-3 px-2" id="sidebar-menu">
                </div>

            <div class="p-3 border-top border-secondary">
                <a onclick="logout()" class="nav-link-custom text-danger">
                    <i class="bi bi-box-arrow-left"></i> Cerrar Sesión
                </a>
            </div>
        </div>

        <div class="main-content-wrapper flex-grow-1 p-4">
            
            <div id="welcome-banner" class="mb-4"></div>

            <div id="area-trabajo" class="bg-white p-4 rounded shadow-sm" style="min-height: 500px;">
                <div class="text-center text-muted py-5">
                    <i class="bi bi-cursor-fill" style="font-size: 3rem; opacity: 0.2;"></i>
                    <h4 class="mt-3">Listo para trabajar</h4>
                    <p>Selecciona una opción del menú izquierdo.</p>
                </div>
            </div>

            <footer class="text-center text-muted mt-5 small">
                &copy; 2025 Sistema Escolar SOA
            </footer>
        </div>
    </div>

    <div id="modal-container"></div>
    <div id="modal-alumnos-container"></div> <div id="modal-detalle-container"></div> <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    
    <script src="app.js"></script>
    
    <script>
        // Si ya hay sesión iniciada, mostramos dashboard directo
        if(localStorage.getItem('token')) {
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('dashboard-screen').classList.remove('oculto');
        }
    </script>
</body>
</html>